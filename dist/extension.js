(()=>{"use strict";var t={28:function(t,e,o){var n,r=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||(n=function(t){return n=Object.getOwnPropertyNames||function(t){var e=[];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[e.length]=o);return e},n(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o=n(t),a=0;a<o.length;a++)"default"!==o[a]&&r(e,t,o[a]);return i(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.getConfig=function(){const t=c.workspace.getConfiguration("htmlListLens");return{...t,light:{color:t.get("decorations.lightColor","lightgray"),backgroundColor:t.get("decorations.lightBackground","rgba(0, 0, 0, 0.1)")},dark:{color:t.get("decorations.darkColor","gray"),backgroundColor:t.get("decorations.darkBackground","rgba(255, 255, 255, 0.1)")},fontStyle:t.get("decorations.fontStyle","italic"),fontWeight:t.get("decorations.fontWeight","normal")}};const c=a(o(398))},265:function(t,e,o){var n,r=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||(n=function(t){return n=Object.getOwnPropertyNames||function(t){var e=[];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[e.length]=o);return e},n(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o=n(t),a=0;a<o.length;a++)"default"!==o[a]&&r(e,t,o[a]);return i(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.activate=function(t){f=p(),t.subscriptions.push(f);const e=c.workspace.onDidChangeTextDocument((t=>{const e=c.window.activeTextEditor;if(!e||e.document!==t.document)return!1;d(e)})),o=c.window.onDidChangeActiveTextEditor((t=>{t&&d(t)})),n=c.window.activeTextEditor;n&&d(n),c.workspace.onDidChangeConfiguration((t=>{if(t.affectsConfiguration("htmlListLens.decorations")){f?.dispose(),f=p();const t=c.window.activeTextEditor;t&&d(t)}})),t.subscriptions.push(e,o)},e.deactivate=function(){f&&f.dispose()};const c=a(o(398)),s=o(337),l=o(500),u=o(28);let f;function p(){const t=(0,u.getConfig)();return c.window.createTextEditorDecorationType({after:{margin:"0 0 0 0.5em"},light:{after:{color:t.light.color,backgroundColor:t.light.backgroundColor,fontStyle:t.fontStyle,fontWeight:t.fontWeight}},dark:{after:{color:t.dark.color,backgroundColor:t.dark.backgroundColor,fontStyle:t.fontStyle,fontWeight:t.fontWeight}}})}async function d(t){const e=t.document.languageId;if(!(0,l.getEffectiveLanguages)().includes(e))return!1;const o=t.document.getText(),n=(0,s.extractLiHierarchy)(o),r=[],i=(t,e,o)=>{const n=new c.Position(t.line-1,t.char-1+e),i=`#${o.join(".")}`;r.push({range:new c.Range(n,n),renderOptions:{after:{contentText:i}}})};for(const t of n)i(t.start,3,t.path),i(t.end,4,t.path);t.setDecorations(f,r)}},337:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.extractLiHierarchy=function(t){const e=t.split("\n"),o=[],n=/<(\/?)(ul|ol|li)\b[^>]*?>/gi;for(let t=0;t<e.length;t++){const r=e[t];let i;for(n.lastIndex=0;i=n.exec(r);){const[e,n,r]=i,a={line:t+1,char:i.index+1};"ul"===r||"ol"===r?o.push({type:n?"close-list":"open-list",listType:r,position:a,raw:e}):"li"===r&&o.push({type:n?"close-li":"open-li",position:a,raw:e})}}const r=[],i=[],a=[],c=[];for(const t of o)switch(t.type){case"open-list":{const e=a.length>0?[...a[a.length-1].path]:[];i.push({type:t.listType,counter:0,path:e});break}case"close-list":i.pop();break;case"open-li":if(0===i.length)break;const e=i[i.length-1];e.counter++;const o=[...e.path,e.counter];a.push({path:o}),c.push({start:t.position,path:o});break;case"close-li":{const e=c.pop();a.pop(),e&&r.push({start:e.start,end:t.position,level:e.path.length,index:e.path.at(-1),path:e.path});break}}return r}},398:t=>{t.exports=require("vscode")},500:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getEffectiveLanguages=function(){const t=(0,n.getConfig)(),e=t.get("includeLanguages")??[],o=t.get("excludeLanguages")??[],i=new Set([...r,...e]);for(const t of o)i.delete(t);return[...i]};const n=o(28),r=["html","handlebars","twig","php","javascript","javascriptreact","typescript","typescriptreact","vue","svelte"]}},e={},o=function o(n){var r=e[n];if(void 0!==r)return r.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,o),i.exports}(265);module.exports=o})();